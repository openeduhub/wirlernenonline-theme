jQuery(document).ready((function(){hideLoading(),jQuery("select.portfolio-filter").select2({multiple:!0}),jQuery(".filter-dimension").ionRangeSlider({onFinish:function(e){displayLoading();let t=e.input.context.name,i={min:e.from,max:e.to};addActiveFilter(e.input.context.dataset.filter),filterStore.dimensions[t]=i,$grid.isotope()}}),resetGroups(),resetTerms(),$grid.isotope({itemSelector:".filter-item",masonry:{columnWidth:".filter-item",horizontalOrder:!0},filter:function(){let e=!0,t=jQuery(this);if(0==activeFilters.length)return!0;{for(let i in activeFilters){let r=activeFilters[i];if(r=filterFns[r]||r,r&&(e=e&&t.is(r)),!e)break}let i=!0;if(filterStore.search){i=t.find("h3").html().match(filterStore.search);let e=t.data("terms");if(e.length>=0)for(let t in e){let r=e[t];i=i||r.match(filterStore.search)}}return e&&i}},getSortData:{name:function(e){return jQuery(e).find("h3").html()},length:function(e){return parseFloat(jQuery(e).data("specs").length)},width:function(e){return parseFloat(jQuery(e).data("specs").width)},height:function(e){return parseFloat(jQuery(e).data("specs").height)},viewCount:function(e){return parseFloat(null==jQuery(e).data("specs").viewCount?0:jQuery(e).data("specs").viewCount)}}}),$grid.isotope("updateSortData").isotope(),$imgs.lazyload({failure_limit:Math.max($imgs.length-1,0),event:"lazylazy"}),$grid.isotope("on","arrangeComplete",(function(e){loadVisible($imgs,"lazylazy"),0==e.length?jQuery(".filter-empty-message").removeClass("hide"):jQuery(".filter-empty-message").addClass("hide"),hideLoading()}));let e=getQueryVariable("group");e&&setGroup(e);let t=getQueryVariable("devicetype");t&&setTerm(t,"device-type");let i=getQueryVariable("playfunction");i&&setTerm(i,"play-function");let r=getQueryVariable("industry");r&&setTerm(r,"industry"),console.log(e,t,i,r)}));let $grid=jQuery(".filter-list"),$imgs=jQuery("img.lazyload");function loadVisible(e,t){e.filter((function(){var e=this.getBoundingClientRect();return e.top>=0&&e.top<=window.innerHeight})).trigger(t)}function getQueryVariable(e){for(var t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var r=t[i].split("=");if(r[0]==e)return r[1]}return!1}function setGroup(e){jQuery("select#filter-group").val(e).trigger("change")}function setTerm(e,t){jQuery("select#filter-terms-"+t).val(e).trigger("change")}jQuery(window).scroll((function(){loadVisible($imgs,"lazylazy")}));let filterStore={search:"",groups:[],terms:[],dimensions:{length:{min:null,max:null},width:{min:null,max:null},height:{min:null,max:null}}},activeFilters=[];function addActiveFilter(e){e=activeFilters[e]||e,activeFilters.includes(e)||activeFilters.push(e)}function resetActiveFilter(){activeFilters.length=0}function resetSelect2(e){e.val(null).trigger("change")}function resetSlider(e){jQuery(e).data("ionRangeSlider").reset()}function resetTextInput(e){e.val("")}function resetSearch(){resetTextInput(jQuery("input.filter-search")),filterStore.search=""}function resetGroups(){jQuery("select#filter-group").each((function(){resetSelect2(jQuery(this))})),filterStore.groups.length=0}function resetTerms(){jQuery("select.portfolio-filter-terms").each((function(){resetSelect2(jQuery(this))})),filterStore.terms.length=0}function resetDimensions(){jQuery(".filter-dimension").each((function(){resetSlider(this)}));for(let e in filterStore.dimensions)filterStore[e]={min:null,max:null}}function resetAll(){displayLoading(),resetSearch(),resetGroups(),resetTerms(),resetDimensions()}let filterFns={termFilter:function(){let e=jQuery(this).data("terms");return 0==filterStore.terms.length||filterStore.terms.every(t=>e.includes(t))},groupFilter:function(){let e=jQuery(this).data("specs").group;return 0==filterStore.groups.length||filterStore.groups.includes(e)},lengthFilter:function(){let e=jQuery(this).data("specs").length;return!!e&&(parseFloat(e)>=parseFloat(filterStore.dimensions.length.min)&&parseFloat(e)<=parseFloat(filterStore.dimensions.length.max))},widthFilter:function(){let e=jQuery(this).data("specs").width;return!!e&&(parseFloat(e)>=parseFloat(filterStore.dimensions.width.min)&&parseFloat(e)<=parseFloat(filterStore.dimensions.width.max))},heightFilter:function(){let e=jQuery(this).data("specs").height;return!!e&&(parseFloat(e)>=parseFloat(filterStore.dimensions.height.min)&&parseFloat(e)<=parseFloat(filterStore.dimensions.height.max))},resetFilter:function(){return!0}};function triggerSearch(){displayLoading();let e=jQuery(".filter-search").val();filterStore.search=new RegExp(e,"gi"),$grid.isotope()}function displayLoading(){jQuery(".filter-loading").show()}function hideLoading(){jQuery(".filter-loading").hide()}function debounce(e,t,i){var r;return function(){var n=this,l=arguments,o=function(){r=null,i||e.apply(n,l)},s=i&&!r;clearTimeout(r),r=setTimeout(o,t),s&&e.apply(n,l)}}jQuery(".filter-reset").click((function(e){displayLoading(),resetAll(),resetActiveFilter(),$grid.isotope()})),jQuery("input.filter-search").keyup((function(e){debounce(triggerSearch(),250)})),jQuery("select.portfolio-filter").change((function(e){displayLoading();let t=jQuery(this),i=t.select2("data");i=i.map(e=>e.id);let r=t.data("filter"),n=t.data("filtertype");addActiveFilter(r),filterStore[n]=i,$grid.isotope()})),jQuery(window).resize((function(){jQuery("select.portfolio-filter").each((function(){let e=jQuery(this).parent(),t=e.outerWidth();e.find(".select2-container").css("width",t+"px")}))})),jQuery("select#filter-sort-by").on("change",(function(){displayLoading(),$grid.isotope({sortBy:jQuery(this).val()})})),jQuery("select#filter-sort").on("change",(function(){displayLoading(),$grid.isotope({sortAscending:"true"==jQuery(this).val()})}));